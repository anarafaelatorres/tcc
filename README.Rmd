---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```


```{r}
`%>%`<-magrittr::`%>%`
library(ggplot2)
library(gganimate)
library(dplyr)
library(sf)
```

# tcc

<!-- badges: start -->
<!-- badges: end -->

The goal of tcc is to ...

What is special about using `README.Rmd` instead of just `README.md`? You can include R chunks like so:

```{r cars}
dados<-readr::read_rds("data/ssp.rds")

dados %>% 
  dplyr::mutate(data = stringr::str_c(ifelse(mes <10,"0",""),mes,ano)) %>% 
  dplyr::group_by(ano, regiao_nome) %>% 
  dplyr::summarise(
      dplyr::across(.cols = where(is.numeric), 
                  .fns = sum, na.rm = TRUE)) %>% 
  ggplot2::ggplot() +
  ggplot2::geom_col(aes(x = ano, y = roubo_total))

```

```{r}

municipios_brasil <- readr::read_rds("data/municipios_todos.rds")

dados_idh_muni <- abjData::pnud_min %>% 
  mutate(code_muni = as.double(muni_id))


geom_sp<-municipios_brasil %>% 
  filter(abbrev_state == "SP")
  
  
dados %>% 
  filter(ano >= 2015) %>%
  select(municipio_nome, ano, roubo_total) %>% 
  group_by(ano, municipio_nome) %>% 
  summarise(roubo_total = sum(roubo_total, na.rm = TRUE)) %>% 
  left_join(geom_sp, by=c("municipio_nome" = "name_muni")) %>%
  filter(!is.na(abbrev_state)) %>% 
  ggplot(aes(fill = roubo_total)) +
  facet_wrap(~ano) +
  scale_fill_viridis_c() +
  geom_sf(aes(geometry = geom))

   

  
dados %>% summary(roubo_total)
  
```

